# WS2812 LED 矩阵钥匙扣

基于 Arduino 的 8x8 WS2812 LED 矩阵智能钥匙扣，集动画、游戏、实用工具于一体。

## 功能特性

### 动画效果
- **火焰动画** - 逼真的火焰燃烧效果
- **彩虹流动** - 流动的彩虹色彩
- **彩虹爱心** - 彩虹色的跳心动画
- **流星雨** - 带拖尾的流星雨效果

### 卡通图片
- 小猫 | 桃子 | 爱心 | 小鸭 | 击剑 | 小狗

### 内置游戏
- **贪吃蛇** - 经典贪吃蛇游戏
- **弹珠游戏** - 弹珠台风格游戏
- **生命游戏** - 康威生命游戏模拟

### 字母/数字显示
- A-Z 全字母显示
- 0-9 数字显示

### 系统功能
- 5 档亮度调节（EEPROM 保存）
- 电池电量显示（4 档电量）
- 充电状态检测与动画
- 低电量警告

### 优化改进
相比原版代码，本项目进行了以下优化：

| 改进项 | 原版 | 优化后 |
|--------|------|--------|
| 充电显示 | 充电时播放一次性动画（3秒） | 充电时持续显示实时电量 |
| 充满检测 | 无充满状态检测 | 根据电压自动检测充满并显示满电图标 |
| 充电反馈 | 充电中途无UI反馈 | 充电全程带闪烁效果，充满后带呼吸效果 |

## 硬件配置

| 组件 | 参数 |
|------|------|
| LED 矩阵 | 8x8 WS2812（64 灯珠） |
| 主控芯片 | Air001 / 兼容 Arduino |
| 左键 | PA4 |
| 右键 | PA1 |
| 电压检测 | PA6 (ADC) |
| 充电检测 | PA0 |

### 电量阈值
| 等级 | 电压范围 |
|------|----------|
| 满电 | > 4.00V |
| 高电量 | 3.85V - 4.00V |
| 中电量 | 3.70V - 3.85V |
| 低电量 | 3.55V - 3.70V |
| 电量耗尽 | < 3.55V |

## 按键操作

| 操作 | 功能 |
|------|------|
| 左键单击 | 切换下一项/向上 |
| 左键长按 | 进入子菜单/确认 |
| 右键单击 | 切换上一项/向下 |
| 右键长按 | 返回上级菜单/退出 |

## 项目架构

```
├── WS2812_Keychain.ino   # 主入口
├── Device.cpp/.h          # 硬件驱动层（LED、按键、电源）
├── manage.cpp/.h          # 状态管理层
├── Animation.cpp/.h       # 动画逻辑层
├── Game.cpp/.h            # 游戏逻辑层
├── Bitmap.cpp/.h          # 位图数据（PROGMEM）
└── enums.h                # 枚举定义
```

## 依赖库

- `WS2812_SYC_Air001.h` - WS2812 驱动库
- `EEPROM.h` - 亮度设置存储

## 编译上传

1. 使用 Arduino IDE 或 PlatformIO
2. 选择对应开发板型号
3. 上传代码

## 作者

**多嘴龙虾**

> 本项目基于 [B站 @沈已成](https://github.com/Eason-SYC/Air001_Based_Colorful_WS2812_Keychain) 的原版代码进行优化和功能扩展


## 许可证

Copyright (c) 2025
